import{k as H,r as C,i as I,l as j,c as f,o as m,a as s,u,t as x,s as B,F as M,b as U,e as k,j as A,g as S}from"./index-B5_PYUth.js";const o=[];for(let t=0;t<256;++t)o.push((t+256).toString(16).slice(1));function V(t,e=0){return(o[t[e+0]]+o[t[e+1]]+o[t[e+2]]+o[t[e+3]]+"-"+o[t[e+4]]+o[t[e+5]]+"-"+o[t[e+6]]+o[t[e+7]]+"-"+o[t[e+8]]+o[t[e+9]]+"-"+o[t[e+10]]+o[t[e+11]]+o[t[e+12]]+o[t[e+13]]+o[t[e+14]]+o[t[e+15]]).toLowerCase()}let w;const q=new Uint8Array(16);function G(){if(!w){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");w=crypto.getRandomValues.bind(crypto)}return w(q)}const E=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D={randomUUID:E};function _(t,e,p){if(D.randomUUID&&!t)return D.randomUUID();t=t||{};const n=t.random??t.rng?.()??G();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,V(n)}const $=H("Cart Store",()=>{const t=C({}),e=I(()=>Object.keys(t.value).length===0),p=I(()=>Object.values(t.value).reduce((r,c)=>r+c.price*c.qty,0));return{cartItems:t,isCartEmpty:e,totalPrice:p,findCartId:r=>{const c=Object.keys(t.value).filter(a=>t.value[a].productId===r);return c.length===0?"newItem":c[0]},isRemoveIdExist:r=>Object.keys(t.value).filter(a=>a===r).length!==0,removeCartById:r=>{delete t.value[r]}}});function g(){const t=j("notify-toast");if(!t)throw new Error("Toast provider is missing!");return t}const R={class:"flex flex-col h-full"},T=["src"],W={class:"p-4 flex flex-col"},O={class:"text-xl font-bold"},Y={class:"card-text"},F={class:"fw-bold text-primary"},L={__name:"ItemCard",props:{product:{type:Object,required:!0}},emits:["add-to-cart"],setup(t,{emit:e}){const p=t,{productId:n,title:l,description:b,price:r,imgUrl:c}=p.product,a=e,i=g(),d=()=>{a("add-to-cart",{productId:n,title:l,price:r}),i.successState(l)};return(h,y)=>(m(),f("div",R,[s("img",{src:u(c),class:"object-cover",style:{width:"100%",height:"120px"}},null,8,T),s("div",W,[s("h5",O,x(u(l)),1),s("p",Y,x(u(b)),1),s("p",F,"$ "+x(u(r)),1),s("button",{class:"btn-md btn-primary",onClick:y[0]||(y[0]=v=>d(u(n),u(l),u(r)))}," 加入購物車 ")])]))}},N={class:"mb-3"},P={class:"flex flex-col"},z={class:"flex items-center"},J={class:"me-2"},K=["onClick"],Q={__name:"ItemCart",setup(t){const e=g(),p=$(),{cartItems:n}=B(p),{isRemoveIdExist:l,removeCartById:b}=p,r=(c,a)=>{e.confirmModal(a).then(i=>{if(i.isConfirmed){if(!l(c)){e.errorState("deleteCart");return}b(c),e.successState(a,"deleteCart")}})};return(c,a)=>(m(),f("ul",N,[(m(!0),f(M,null,U(u(n),(i,d)=>(m(),f("li",{key:d,class:"text-slate-900 bg-gray-200 rounded-2 px-4 py-2 flex justify-between"},[s("div",P,[s("p",null,x(i.title),1),s("p",null,"數量："+x(i.qty),1)]),s("div",z,[s("span",J,"$"+x(i.price),1),s("button",{type:"button",class:"btn-sm btn-danger rounded",onClick:h=>r(d,i.title)}," 移除 ",8,K)])]))),128))]))}},X={class:"flex gap-4"},Z={class:"w-2/3"},tt={class:"flex flex-wrap -mx-3 gap-y-3"},et={class:"w-1/3"},st={key:0,class:"mb-3"},ot={class:"text-xl font-semibold text-end"},rt={__name:"WeekThreeTask",setup(t){const e=C([]);k(()=>{e.value=[{productId:_(),title:"耳罩式藍牙耳機",description:"舒適配戴，支援降噪技術",price:2490,imgUrl:"https://images.unsplash.com/photo-1546435770-a3e426bf472b?q=80&amp;w=2065&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.1.0&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{productId:_(),title:"耳罩式彩虹耳機",description:"舒適配戴，支援降噪技術",price:1380,imgUrl:"https://images.unsplash.com/photo-1723924995430-b74c76bbcdfd?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{productId:_(),title:"時尚藍牙耳機",description:"舒適配戴，支援降噪技術",price:7990,imgUrl:"https://images.unsplash.com/photo-1640028056578-76ced19fd215?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{productId:_(),title:"機械式鍵盤",description:"紅軸機械鍵盤，打字手感極佳",price:1890,imgUrl:"https://images.unsplash.com/photo-1723709752095-f096290f53f7?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{productId:_(),title:"無線滑鼠",description:"舒適配戴，支援降噪技術",price:890,imgUrl:"https://images.unsplash.com/photo-1660491083562-d91a64d6ea9c?q=80&w=1162&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}]});const p=g(),n=$(),{cartItems:l,isCartEmpty:b,totalPrice:r}=B(n),{findCartId:c}=n,a=({productId:i,title:d,price:h})=>{if(!i){p.errorState();return}const y=c(i);if(y==="newItem"){const v=_();l.value[v]={productId:i,title:d,price:h,qty:1}}else l.value[y].qty++};return(i,d)=>(m(),f("div",X,[s("div",Z,[d[0]||(d[0]=s("h3",{class:"text-2xl mb-4"},"商品列表",-1)),s("div",tt,[(m(!0),f(M,null,U(e.value,h=>(m(),f("div",{key:h.productId,class:"w-full md:w-1/2 lg:w-1/3 px-3"},[S(L,{product:h,onAddToCart:a},null,8,["product"])]))),128))])]),s("div",et,[d[1]||(d[1]=s("h3",{class:"text-2xl mb-4"},"購物車",-1)),u(b)?(m(),f("p",st,"沒有選購的商品喔")):(m(),A(Q,{key:1})),s("h3",ot,"總金額："+x(u(r)),1)])]))}};export{rt as default};
